# oslash
 An employee of a high profile social media company and in regards to a recent security incident, you've been given the responsibility to design a solution and to prototype an authenticated audit and logging mechanism to prevent/monitor any abuse of internal tools that can be used to perform actions on production environments. 

**Specifications**

There are three major roles:

1. **Users**: Generic user account
    - Users generate content independently on the platform in the form of posts.
2. **Admin**: Internal employee account of the company
    - Admins can monitor/modify any data generated by said users'. (After approval from super admin)
3. **Super-Admin**: Internal employee with critical data access
    - Each modification by an admin is followed by a verification/approval from the super-admin.
    

**Audit logs**: Every action done by any user should be saved for auditing purpose (including reading of the data)

# API's 

**Users**

1. User can request for creation by giving their name, email and password. Password is being hashed and stored in database.
2. Users can login by providing email and password. A jsonwebtokenn will be generated after successfully logged in. This will be used as a authorization for the user for a particlar endpoint.

**Employee**
1. Employee can request for creation by giving their name, userLevel and password. This can be only done by superadmin. There can be only one "SUPER ADMIN" which will be manually entered in the database. Password will be hashed and stored in database.
2. Employees can login by providing email and password. A jsonwebtoken will be generated after successfully logged in. There will two different jsonwebtoken i.e. for admin there will be different jsonwebtoken and superadmin there will be different web token.

**Posts**

1. A user can post anything after logging in. Authorization will be done by generated jsonwebtoken. If provided web token is of user then user is allowed to post anything.

2. User can also view his/her previous posts. The user must be logged in to view all the posts.

3. The user can also delete their post byy providing the postId of his/her post. User must be logged in to delete any post.

4. Posts can be liked or disliked by the user. User must be loggedin to like/dislike any particular post.
**Admin**

1. Admin i.e. an employee can monitor the users post by viewing all the posts of all users. Employee must be logged in to view all posts of user.
2. Admin can update the post on behalf of user's post by providing the postId of that post and can provide field that is to be updated. Admin must be logged in to update anything on user's behalf.

3. Admin can also create a new  post on behalf of user's post by providing  field that is to be created. Admin must be logged in to create anything on user's behalf.

4. Admin can also delete the user's post by providing the postId. Admin must be logged in to create anything on user's behalf.

5. Admin can also view the all the logs. Admin must be logged in to view it.
6. All the opeartions done on user's behalf by admin will be stored and it will make changes after the superadmin approves it. Super admin can also reject the admin request in this case opeartion done by admin on user's behalf will not be entertained.

**Super-admin**

1. Superadmin can view all the admin post done on the behalf of the user. Superadmin has the authorization of this route so, superadmin must be logged in to view all admin posts.

2. Superadmin can also view all the audit logs. Superadmin must be logged in in order to view it.

3. Superadmin can approve/reject the operation requested by the admin on user's post. If superadmin approves the opeartion then it will be immedaitely done else it will update the status in admin post. Super admin must be logged in in order to approve/reject it.

4. Superadmin can view all the posts created by the user. Superadmin must be loggedin to view it.

# Audit Logs
Audit logs is the middleware function in which it will be called in each route before it starts it's opeartions. Whenever any route is being called the audit-log will be done.

It can only be allowed to view for only admin and superadmin. The purpose of this to check that how many times the api is being requested and what and all are being opeartions done by whom.

# Testing
Integration testing is done for this application. It is being done to check that all operations and APIs calling is performing the task properly or not by giving different inputs and checking whether it is sending the correct response or not or producing the correct output or not.

Jest and supertest npm packages is being used for this.

# Super Admin Analytics
Super Admin can monitor the user's post and check the likes and dislikes on a particular post.
If there are more dislikes than likes then superadmin can immediately remove the post. This can only be done by superadmin so, superadmin has to be loggedin to perform such action